#Тетрис

Проектната задача се состои од изработка на игра според моделот на популарната игра тетрис. Целта на играта е да се исчистат колку што е можно повеќе редови на коцки преку разместување на различни форми кои се генерираат случајно. Генерираните форми се бираат од седум различни форми и се спуштаат од горе кон доле, сѐ до позиција во која има слободен простор. Дополнително за корисникот се пресметува и број на поени, а со тоа напоредно се врши и повремено зголемување на нивото. Во однос на висината на нивото, се зголемува и тежината на играта, која е изразена преку брзината на спуштање на формите. При стартувањето пак, на играчот му се понудени три начина на играње на играта. Single player - најкласичен начин на играње, единствен играч, се пресметуваат поени и се зголемува ниво. Two player - начин во кој играта може да ја играат двајца играчи. Третиот начин содржи временско ограничување при играњето како предизвик за достигнување на што е можно повеќе поени за ограничено време. Во позадина, кодот е организиран во неколку класи. Притоа секоја од формите има своја класа, кои пак наследуваат од класата **Shape** во која се наоѓаат заеднички методи. Додатни класи кои постојат се класите **Game**, **IndexKeeper** и **CloudAnimation**. Преку класата **Game** се врши главната контрола врз текот и однесувањето играта. Додека **IndexKeeper** се користи како податочна структура, а **CloudAnimation** за функционирањето на анимациска компонента во формата. Постои и класа **Block** исто така како податочна структура за задачата. Покрај ова постојат и четири Windows форми, кои го содржат графичкиот приказ на документот. 
 
##Опис на решениe

Гланата логика на играта Тетрис се состои од разгледување на целата површина за играње како матрица. Со тоа лесно ќе се манупулира исцртувањето на формите, како и контролата врз чистењето на исполентите редови. Затоа ќе креираме матрица од класата **Bock**, во класата **Game**. Класата во себе чува *булеан* вредност за зафатеноста на полето од матрицата, две *int* вредности со кои се означува позицијата на исцртување на полето, како и *Color*  каде се чува бојата која ја има полето. Освен матрицата класата **Game** во себе содржи и број на редови и колони, ширината на секое поле и почетната брзина на спуштање како *int* вредности. Како *int* вредности се чуваат и поените, бројот на избришани редови, брзината и нивото. Постои и булеан променливаа која чува дали играта се извршува или не, наречена *started* Во класата постојат и други елементи кои помагаат при извршувањето на играта. Два тајмери, листа на редови за бришење, два **Graphics** објекта и два **Shape** објекти. Декларирана е и енумерација на секоја од формите за користење низ извршувањето. Содржи функции кои го извршуваат поместувањето врз формите, изборот на нова форма, исчистувањето на формата, како и бришењето на редовите. Веднаш штом започне играта на корисникот му се отвара форма во која бира како ќе го продолжи играњето. Бира од три типа на играње кои веќе ги опишавме. Се отвара избраната форма. За пример ќе ја земем *SinglePlayer* формата. Taa во себе содржи објект од класата **Game** и **CloudAnimation**. Со самото стартување се вклучува тајмер во конструкторот и се повикува функцијата *startGame()*. Во функцијата се врши иницијализација на лабелите и се стартува првиот тајмер. Останатиот дел од извршувањето се префрла на настанот кој го создава отчукувањето на тајмерот, кое е поставено на 1 секунда. Настанот на тајмерот ни врши проверка дали играта е завршена и доколку е завршена се прашува корисникот дали да започне нова или да го затвори прозорецот. Освен во формата, настан за отчукувањето на тајмерот се фаќа и во класата *Game*.

####Опис на функциите класата Game

Веднаш штом почнува отчкувањето во хендлерот за настанот се генерира нова форма, доколку не постои друга. Тоа го прави функцијата *AddPiece()* на тој начин што се генерира рандом број, и сопред енумерацијата на формата, се иницијализира  форма. По креирањето веднаш се проверува дали може да се движи формата. Поточно, функцијата *CanGoDown(Shape shape)*. Taa врши проверка на сите околну полиња на формата, според нејзините индекси, и враќа точна вредност доколку е можно. Ако не, се запираат тајмерите, се проверуваат редовите кои ги исполнува формата и дали тие може да се избришат и доколку има такви се додаваат во листата на редови за бришење со функцијата *FindFullRows()*. Доколку пак нема редови за бришење, а функцијата *CanGoDown()*, враќа false се извршува крај на играта, спротивно, само се креира нова форма со *AddPiece()*. Дополнителни функции кои ги содржи оваа функција се оние за поместување на елементот. Односно, *MoveRight()*,*MoveLeft()*, *Rotate()*, како и функции слични на CanGoDown(Shape shape), но сега за ротација, поместување лево или десно.  Сиве овие функции ја повикуваат функцијата за цртање *Draw()*. Оваа функција ја изминува матрицата и на местата каде што вредноста на променливата *taken* e true, се чита бојата која ја чува ова поле и таа се исцртува. Исцртувањето пак го прави функцијата *DrawAt()*. Постојат две варијанти, една со позиции, и со позиции и боја. Истата црта така што креира квадрат на позиција y * должина на коцка и x * висина на коцка. Формите кои се генерираат ги исцртува функцијата *DrawNext()* која како аргимент прима објект од класата Shape. Од објектот ги чита позициите на кои треба да се исцртаат сите негови коцки. При цртањето и придвижувањето коцките се изменува и матрицата на тој начин што се изменува вредноста на *taken* во однос на тоа дали е зафатена или не, и се зачувува бојата.

##Играње на играта

На корисникот му се нудат три начини на играње, Single Player, Two Players, Blitz. На првиот режим игра само еден корисник. Со стрелите од тестатурата се придвижуваат форми, а со копчето за Space се спушта брзо формата. Во Two Players, играат два играчи каде контролите за вториот играч се W, S, A, D и Ј. Во третиот режим играчот игра на ограничено време. После крајот на секоја игра (кога ќе заврши времето, или нема простор за нови форми) се поставува прашање до корисникот даи да почне нова игра или да се врати на почетокот.

1.Почетно мени

![Почетен Екран]
(https://photos-4.dropbox.com/t/2/AABxMcCmkk8knNqwCA5GOXdvjbdJ3Rku9uVOBCnbD7ySmw/12/147054400/jpeg/1024x768/3/1431295200/0/2/1.JPG/CMC-j0YgASACIAMgBCAFKAE/KNfU0s3nLIeYR0ia4Kn2M8iQ62T4mPpK-lbXGC0BE1c) 

2.Еден играч

![еден играч]
(https://photos-4.dropbox.com/t/2/AACaUzrC6aDHElTMvXz98TvlCewAOhsEoK06A8zotwYTiA/12/147054400/jpeg/1024x768/3/1431295200/0/2/2.jpg/CMC-j0YgASACIAMgBCAFKAE/eLXOCk8O2APMsx2n81Ot1RwPPTpNf_lqxorr5-aed7E) 

3.Еден играч - крај на игра

![Крај на игра]
(https://photos-5.dropbox.com/t/2/AABGDkO7iV7rcy1YG5GIBkP4D1MXFmO-XG2uY9jQ6-Wtpw/12/147054400/jpeg/1024x768/3/1431295200/0/2/3.JPG/CMC-j0YgASACIAMgBCAFKAE/UWAM7OU-Is4u2FjWQp0RmRzyMGn5bZY6gXvthzU_Y2k) 

4.Два играчи

![Даа играчи]
(https://photos-3.dropbox.com/t/2/AADBwFL90ZY6HTbjQ2uCLguOZ504q4fLDsXUhx-cJwRhaA/12/147054400/jpeg/1024x768/3/1431295200/0/2/4.jpg/CMC-j0YgASACIAMgBCAFKAE/jQ8OqN17BuFfljmOmyczGzhgG8zP7ae3XWSmvtr3e-M) 

5.Два играча - крај на игра

![Два играчи - крај на игра]
(https://photos-3.dropbox.com/t/2/AACcXizSLShdhKXTViYkIoYQEt7rjEAL0vMUEkHl8lvrlw/12/147054400/jpeg/1024x768/3/1431295200/0/2/5.JPG/CMC-j0YgASACIAMgBCAFKAE/dc6kIHJMDV3XCzGaluXGKQlxFtZkS3-Lq3fMpo68GrE) 

6.Blitz режим

![Блиц]
(https://photos-3.dropbox.com/t/2/AACw98SsKdHDd87FzzM-De64Xy0qN7Yztdk43Bm3QEY4Fw/12/147054400/jpeg/1024x768/3/1431295200/0/2/6.jpg/CMC-j0YgASACIAMgBCAFKAE/zk7nh5GR4cklXgstIsys2-6mhgR35TKhDW_D1W8J724) 

7.Blitz режим - крај на игра

![Крај на игра]
(https://photos-6.dropbox.com/t/2/AAClkiw2JpxUOJYtjHQPMQIh6Ai7Y8lmbxAu9XSyHlvccQ/12/147054400/jpeg/1024x768/3/1431295200/0/2/7.JPG/CMC-j0YgASACIAMgBCAFKAE/RHoEHzRVFIaqJvHb8dYdpDI_EiZTp8MENPevrE9dsdU) 
